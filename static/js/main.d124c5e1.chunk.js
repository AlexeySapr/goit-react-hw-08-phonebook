(this["webpackJsonpreact-phonebook"]=this["webpackJsonpreact-phonebook"]||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"changeFilter",(function(){return x}));var o={};n.r(o),n.d(o,"getFilter",(function(){return ce}));var a,c,i,s,l,u,d,b=n(0),j=n.n(b),h=n(37),f=n.n(h),g=n(19),m=n(15),p=n(3),O=n(12),x=Object(O.b)("phonebook/changeFilter"),v=Object(O.d)("",Object(p.a)({},x,(function(e,t){return t.payload}))),y=n(88),w=n(30),C=Object(y.a)({reducerPath:"contactsApi",baseQuery:Object(w.d)({baseUrl:"https://61dd6565f60e8f0017668798.mockapi.io"}),tagTypes:["Contacts"],endpoints:function(e){return{getContacts:e.query({query:function(){return"/contacts"},providesTags:function(e){return e?e.map((function(e){return{type:"Contacts",id:e.id}})):["Contacts"]}}),addContact:e.mutation({query:function(e){return{url:"/contacts",method:"POST",body:e}},invalidatesTags:["Contacts"]}),deleteContact:e.mutation({query:function(e){return{url:"/contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contacts"]})}}}),P=C.useGetContactsQuery,k=C.useAddContactMutation,S=C.useDeleteContactMutation,F=Object(O.a)({reducer:Object(p.a)({filter:v},C.reducerPath,C.reducer),middleware:function(e){return[].concat(Object(m.a)(e()),[C.middleware])},devTools:!1}),M=n(14),T=n(172),A=n(94),B=n(188),I=(n(120),n(1)),q=Object(b.createContext)({toggleColorMode:function(){}}),z=function(e){var t=e.children,n=Object(b.useState)("light"),r=Object(M.a)(n,2),o=r[0],a=r[1],c=Object(b.useMemo)((function(){return{toggleColorMode:function(){a((function(e){return"light"===e?"dark":"light"}))}}}),[]),i=Object(b.useMemo)((function(){return Object(A.a)(function(e){return{typography:{fontFamily:"Kanit"},components:{MuiCssBaseline:{styleOverrides:"\n        @font-face {\n          font-family: 'Ubuntu';\n          font-style: normal;\n          font-weight: 400;\n          src: url(\"https://fonts.googleapis.com/css2?family=Kanit:wght@200;400;600&display=swap\");\n        }\n      "}},palette:{mode:e},colors:{primary:"#57d0e6",white:"#fff",borderColor:"#bdbdbd",textColor:"#212529",inputBoxShadow:"0 0 0 0.2rem rgba(87, 208, 230, 0.5)"},btnLoader:{justifyContent:"center",alignIitems:"center"}}}(o))}),[o]);return Object(I.jsx)(q.Provider,{value:c,children:Object(I.jsxs)(B.a,{theme:i,children:[Object(I.jsx)(T.a,{}),t]})})},E=n(18),L=n(20),R=(L.a.div(a||(a=Object(E.a)(["\n  margin-top: 15px;\n  margin-bottom: 15px;\n"]))),L.a.h2(c||(c=Object(E.a)(["\n  font-weight: 500;\n  text-transform: uppercase;\n"]))),n(193)),D=Object(L.a)(R.a)((function(e){return{textAlign:"center",color:e.theme.palette.text.secondary,backgroundColor:"#cfe8fc",display:"block",width:"100%"}})),N=n(192),W=n(189),U=n(194),Z=Object(L.a)(U.a)((function(){return{display:"flex",alignItems:"center",textTransform:"uppercase"}})),J=L.a.div(i||(i=Object(E.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),K=Object(L.a)(N.a)((function(){return{display:"block",marginBottom:"1rem",boxShadow:"0px 8px 15px -10px rgba(34, 60, 80, 0.6)"}})),Q=n(186),G=n(95),V=function(){return Object(I.jsx)(K,{children:Object(I.jsxs)(J,{children:[Object(I.jsxs)(Z,{variant:"h5",children:["Phonebook",Object(I.jsx)(G.a,{})]}),Object(I.jsx)(Q.a,{inputProps:{"aria-label":"controlled"}})]})})},$=n(35),H=n(61),X=L.a.form(s||(s=Object(E.a)(["\n  padding: 30px;\n  background-color: rgba(247, 230, 230, 50%);\n"]))),Y=(L.a.label(l||(l=Object(E.a)(["\n  display: flex;\n  flex-direction: column;\n  font-weight: 500;\n  font-size: 1.5rem;\n  margin-bottom: 20px;\n"]))),L.a.input(u||(u=Object(E.a)(["\n  width: 300px;\n  margin-top: 5px;\n\n  padding: 0.375rem 0.75rem;\n  font-family: inherit;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: ",";\n  border: ",";\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n\n  &:focus {\n    border-color: ",";\n    outline: 0;\n    box-shadow: ",";\n  }\n"])),(function(e){return e.theme.colors.textColor}),(function(e){return"1px solid ".concat(e.theme.colors.borderColor)}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.inputBoxShadow})),L.a.button(d||(d=Object(E.a)(["\n  background-color: transparent;\n  padding: 5px 10px;\n  border-radius: 5px;\n  width: 120px;\n  font-size: 1rem;\n  transition: background-color 300ms ease-in-out, color 300ms ease-in-out;\n\n  &:hover,\n  &:focus {\n    color: ",";\n    outline: 0;\n    cursor: pointer;\n    background-color: ",";\n  }\n"])),(function(e){return e.theme.colors.white}),(function(e){return e.theme.colors.primary})),n(183)),_=n(185),ee=n(91),te=n(93),ne=["onChange"],re=Object(b.forwardRef)((function(e,t){var n=e.onChange,r=Object(ee.a)(e,ne);return Object(I.jsx)(te.a,Object($.a)(Object($.a)({},r),{},{mask:"+38(###) ###-##-##",definitions:{"#":/[0-9]/},inputRef:t,onAccept:function(t){return n({target:{name:e.name,value:t}})},overwrite:!0}))})),oe={name:"",phone:""},ae=function(){var e=Object(b.useState)((function(){return oe})),t=Object(M.a)(e,2),n=t[0],r=t[1],o=P(),a=(o.data,o.error,k()),c=Object(M.a)(a,2),i=c[0],s=c[1].isLoading,l=function(e){r(Object($.a)(Object($.a)({},n),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(H.a,{}),Object(I.jsxs)(X,{onSubmit:function(e){e.preventDefault(),console.log("formValues: ",n),i(n),r(oe)},children:[Object(I.jsx)(Y.a,{id:"standard-basic",label:"Name",name:"name",value:n.name,onChange:l,inputProps:{inputMode:"text",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces."},variant:"standard",sx:{mb:2},fullWidth:!0,required:!0}),Object(I.jsx)(Y.a,{id:"standard-basic",label:"Phone",name:"phone",value:n.phone,onChange:l,InputProps:{inputMode:"tel",inputComponent:re},variant:"standard",sx:{mb:2},fullWidth:!0,required:!0}),Object(I.jsx)(_.a,{type:"submit",loading:s,disabled:s,loadingIndicator:"Adding...",variant:"outlined",children:"Add contact"})]})]})},ce=function(e){return e.filter},ie=n(197),se=n(198),le=n(196),ue=n(182),de=n(195),be=n(201),je=n(202),he=n(191),fe=n(203),ge=[{id:"name",label:"Name"},{id:"phone",label:"Phone"}];var me=function(e){var t=e.order,n=e.orderBy,r=e.onRequestSort;return Object(I.jsx)(be.a,{children:Object(I.jsxs)(je.a,{children:[ge.map((function(e){return Object(I.jsx)(fe.a,{align:"center",padding:"normal",children:Object(I.jsx)(he.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(o=e.id,function(e){r(e,o)}),children:e.label})},e.id);var o})),Object(I.jsx)(fe.a,{align:"center",padding:"normal"})]})})},pe=function(e){var t=e.id,n=e.name,r=e.phone,o=S(),a=Object(M.a)(o,2),c=a[0],i=a[1].isLoading;return Object(I.jsxs)(je.a,{hover:!0,role:"listitem",tabIndex:-1,children:[Object(I.jsx)(fe.a,{align:"center",children:n}),Object(I.jsx)(fe.a,{align:"center",children:r}),Object(I.jsx)(fe.a,{align:"center",children:Object(I.jsx)(_.a,{onClick:function(){return c(t)},disabled:i,loading:i,loadingIndicator:"Deleting...",variant:"outlined",children:"Delete"})})]})};function Oe(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function xe(e,t){return"desc"===e?function(e,n){return Oe(e,n,t)}:function(e,n){return-Oe(e,n,t)}}var ve,ye,we=function(e){var t=e.contacts,n=Object(b.useState)("asc"),r=Object(M.a)(n,2),o=r[0],a=r[1],c=Object(b.useState)(""),i=Object(M.a)(c,2),s=i[0],l=i[1],u=Object(b.useState)(0),d=Object(M.a)(u,2),j=d[0],h=d[1];console.log("page: ",j),console.log("contacts.length: ",t.length);var f=Object(b.useState)(5),g=Object(M.a)(f,2),m=g[0],p=g[1];return Object(b.useEffect)((function(){t.length<=m&&j>0&&h(0)}),[t.length,m,j]),Object(b.useEffect)((function(){var e=Math.floor(t.length/m);j>e&&(console.log("pageInUse: ",j),console.log("pageNum: ",e),h(e))}),[t.length,j,m]),Object(I.jsx)(R.a,{sx:{width:"100%"},children:Object(I.jsxs)(de.a,{sx:{width:"100%",mb:2},children:[Object(I.jsx)(le.a,{children:Object(I.jsxs)(ie.a,{sx:{minWidth:300},"aria-labelledby":"tableTitle",size:"normal",children:[Object(I.jsx)(me,{order:o,orderBy:s,onRequestSort:function(e,t){var n=s===t&&"asc"===o;console.log("property: ",t),console.log("order: ",o),console.log("orderBy: ",s),a(n?"desc":"asc"),l(t)}}),Object(I.jsx)(se.a,{children:t.sort(xe(o,s)).slice(j*m,j*m+m).map((function(e){return Object(I.jsx)(pe,Object($.a)({},e),e.id)}))})]})}),Object(I.jsx)(ue.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:m,page:t.length<=m?0:j,onPageChange:function(e,t){console.log("event: ",e),h(t)},onRowsPerPageChange:function(e){console.log("eventRowsPerPage: ",e),p(parseInt(e.target.value,10)),h(0)}})]})})},Ce=function(){var e=Object(g.e)(o.getFilter),t=P(),n=t.data,r=t.error,a=e.toLowerCase(),c=[];return n&&(c=n.filter((function(e){return e.name.toLowerCase().includes(a)}))),Object(b.useEffect)((function(){r&&H.b.error("\u0421an't get contacts info from server")}),[r]),Object(I.jsxs)(I.Fragment,{children:[r&&Object(I.jsx)(H.a,{}),!r&&n&&Object(I.jsx)(we,{contacts:c})]})},Pe=L.a.label(ve||(ve=Object(E.a)(["\n  font-size: 1.1rem;\n  font-weight: 500;\n"]))),ke=L.a.input(ye||(ye=Object(E.a)(["\n  margin-left: 20px;\n\n  padding: 0.2rem 0.4rem;\n  color: ",";\n  border: ",";\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n\n  &:focus {\n    border-color: ",";\n    outline: 0;\n    box-shadow: ",";\n  }\n"])),(function(e){return e.theme.colors.textColor}),(function(e){return"1px solid ".concat(e.theme.colors.borderColor)}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.inputBoxShadow})),Se=function(){var e=Object(g.e)(o.getFilter),t=Object(g.d)();return Object(I.jsxs)(Pe,{children:["Find contacts by name:",Object(I.jsx)(ke,{type:"text",name:"filter",value:e,onChange:function(e){return t(r.changeFilter(e.currentTarget.value))}})]})},Fe=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(V,{}),Object(I.jsx)(N.a,{maxWidth:"lg",children:Object(I.jsxs)(W.a,{container:!0,spacing:2,children:[Object(I.jsx)(W.a,{item:!0,xs:12,sm:5,md:4,children:Object(I.jsxs)(D,{children:[Object(I.jsx)(ae,{}),Object(I.jsx)(Se,{})]})}),Object(I.jsx)(W.a,{item:!0,xs:12,sm:7,md:8,children:Object(I.jsx)(D,{children:Object(I.jsx)(Ce,{})})})]})})]})};f.a.render(Object(I.jsx)(j.a.StrictMode,{children:Object(I.jsx)(g.a,{store:F,children:Object(I.jsx)(z,{children:Object(I.jsx)(Fe,{})})})}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.d124c5e1.chunk.js.map